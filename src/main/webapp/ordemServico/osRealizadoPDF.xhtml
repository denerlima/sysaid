<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui"
	xmlns:cp="http://java.sun.com/jsf/composite/components/property">
	
	<html>
	<h:head>
		<title>SysAid</title>
		
		<style type="text/css">
	 
		 	body {
		 		font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
				font-size: 10px;
				line-height: 1.428571429;
				color: #333;
				background-color: #fff;
		 	}
		 
			.ui-datatable table {
	            border-collapse: collapse;
	            width: 100%;
	            table-layout: fixed;
	        }
	
	        .ui-datatable .ui-datatable-header, .ui-datatable .ui-datatable-footer {
	            text-align: center;
	            padding: 4px 10px;
	        }
	
	        .ui-datatable .ui-datatable-header {
	            border-bottom: 0px none;
	        }
	
	        .ui-datatable .ui-datatable-footer {
	            border-top: 0px none;
	        }
	
	        .ui-datatable thead th, .ui-datatable tfoot td {
	            text-align: center;
	        }
	
	        .ui-datatable thead th, .ui-datatable tbody td, .ui-datatable tfoot td {
	            padding: 4px 10px;
	            overflow: hidden;
	            border-width: 1px;
	            border-style: solid;
	        }

			.ui-datatable thead th, .ui-datatable tfoot td {
				background: #f9f9fc;
			}
				
			.ui-datatable tbody td {
				text-align: left;
			}

			.ui-datatable tbody td.coluna-direita {
				text-align: right;
			}

		</style>
		
	</h:head>
	<body>

		<center><h2>Custo Total da Ordem de Serviço - #{ordemServicoBean.ordemServico.id}</h2></center>
		
			
			<p:spacer height="10" />
			
			<center>
				<br />
				
					<p:dataTable id="tableMaterial" var="_mat" value="#{ordemServicoBean.ordemServico.materiais}" emptyMessage="Não existem itens nesta lista."
					styleClass="printTable">
						
						<p:columnGroup type="header">
				            <p:row>
				                <p:column rowspan="2" headerText="Material" />
				                <p:column rowspan="2" headerText="Unidade de Medida Saída" />
				                <p:column colspan="2" headerText="Quantidade" />
				                <p:column rowspan="2" headerText="Valor Unitário" />
				                <p:column rowspan="2" headerText="Valor Total" />
				            </p:row>
				            <p:row>
				                <p:column headerText="Retirada" />
				                <p:column headerText="Utilizada" />
				            </p:row>
				        </p:columnGroup>
						<p:column>
							<h:outputText value="#{_mat.material.materialLabel}" />
						</p:column>
						<p:column>
							<h:outputText value="#{_mat.unidadeMedidaSaida.unidade.descricao}" />
						</p:column>
						<p:column styleClass="coluna-direita">
							<h:outputText value="#{_mat.quantidadeRetirada}" />
						</p:column>
						<p:column styleClass="coluna-direita">
							<h:outputText value="#{_mat.quantidadeUtilizada}" />
						</p:column>
						<p:column styleClass="coluna-direita">
							<h:outputText value="#{_mat.precoUnitario}" converter="bigDecimalConverter" />
						</p:column>
						<p:column styleClass="coluna-direita">
							<h:outputText value="#{_mat.precoTotal}" converter="bigDecimalConverter" />
						</p:column>
						
						<p:columnGroup type="footer">
				            <p:row>
				                <p:column colspan="5" style="text-align: right;" footerText="Custo Total:" />
				                <p:column style="text-align: right;" footerText="#{ordemServicoBean.custoTotalRealizado}" />
				            </p:row>
				        </p:columnGroup>
						
					</p:dataTable>
				
					<br />
					<br />
					
					<p:dataTable var="_mao" value="#{ordemServicoBean.ordemServico.maosDeObras}" emptyMessage="Não existem itens nesta lista."
					styleClass="printTable">
						<p:column headerText="Mão de Obra">
							<h:outputText value="#{_mao.maoDeObra.descricao}" />
						</p:column>
						<p:column headerText="Quantidade" styleClass="coluna-direita">
							<h:outputText value="#{_mao.quantidade}" />
						</p:column>
						<p:column headerText="Período" styleClass="coluna-direita">
							<h:outputText value="#{_mao.periodo}" />
						</p:column>
						<p:column headerText="Unidade de Medida">
							<h:outputText value="#{_mao.unidadeMedidaLabel}" />
						</p:column>
						<p:column headerText="Valor Unitário" styleClass="coluna-direita">
							<h:outputText value="#{_mao.valorUnitario}" converter="bigDecimalConverter" />
						</p:column>
						<p:column headerText="Valor Total" styleClass="coluna-direita">
							<h:outputText value="#{_mao.total}" converter="bigDecimalConverter" />
						</p:column>
						<p:columnGroup type="footer" rendered="#{not empty ordemServicoBean.ordemServico.maosDeObras}">
				            <p:row>
				                <p:column colspan="5" style="text-align: right;" footerText="Total de Mão de Obra:" />
				                <p:column style="text-align: right;" footerText="#{ordemServicoBean.custoTotalMaoDeObra}" />
				            </p:row>
				        </p:columnGroup>
					</p:dataTable>
				
					<br />
					<div style="text-align: right; font-weight: bold;">
						Custo total da Ordem de Serviço: <h:outputText value="#{ordemServicoBean.custoTotalOrdemDeServico}" />
					</div>
				
			</center>
						
		
		
	</body>
	</html>
	
</ui:composition>